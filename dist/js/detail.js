"use strict";!function(l){var i=location.search.substring(1).split("=")[1],o=l(".smallpic"),e=l(".bigpic"),c=l(".title"),a=l(".subtitle"),r=l(".price"),n=l(".info"),i=i||1;l.ajax({url:"http://127.0.0.1/snail/php/getid.php",data:{id:i},dataType:"json"}).done(function(i){console.log(i),o.attr("src",i.url),o.attr("id",i.id),e.attr("src",i.url),c.html(i.title),a.html(i.describe),n.html(i.describe),r.html("ï¿¥"+i.price);var t=i.piclisturl.split(","),s="";l.each(t,function(i,t){s+='<li><img src="'+t+'"/>></li>'}),l(".smallImglist ul").html(s)});var h=l(".smallBox"),d=l(".shade"),t=l(".bigBox"),s=l(".left"),m=l(".right");l("smallImglist");d.width(h.width()*t.width()/e.width()),d.height(h.height()*t.height()/e.height());var u=e.width()/h.width();h.hover(function(){d.css("visibility","visible"),t.css("visibility","visible"),l(this).on("mousemove",function(i){var t=i.pageX-l(".smallBox").offset().left-d.width()/2,s=i.pageY-l(".smallBox").offset().top-d.height()/2;t<0?t=0:t>=h.width()-d.width()&&(t=h.width()-d.width()),s<0?s=0:s>=h.height()-d.height()&&(s=h.height()-d.height()),d.css({left:t,top:s}),e.css({left:-t*u,top:-s*u})})},function(){d.css("visibility","hidden"),t.css("visibility","hidden")}),l(".smallImglist ul").on("click","li",function(){var i=l(this).find("img").attr("src");o.attr("src",i),e.attr("src",i)});var f=6;m.on("click",function(){var i=l(".smallImglist ul li");i.size()>f&&(f++,s.css("color","#333"),i.size()==f&&m.css("color","#fff"),l(".smallImglist ul").animate({left:-(f-6)*i.eq(0).outerWidth(!0)}))}),s.on("click",function(){var i=l(".smallImglist ul li");6<f&&(f--,m.css("color","#333"),f<=6&&s.css("color","#fff"),l(".smallImglist ul").animate({left:-(f-6)*i.eq(0).outerWidth(!0)}))});var p=[],g=[];l(".carBtn").on("click",function(){var i,t=l(this).parents("#details").find(".smallpic").attr("id");g=l.cookie("cookieid")&&l.cookie("cookienum")?(p=l.cookie("cookieid").split(","),l.cookie("cookienum").split(",")):(p=[],[]),console.log(t),-1!=l.inArray(t,p)?(i=parseInt(g[l.inArray(t,p)])+parseInt(l("#count").val()),g[l.inArray(t,p)]=i):(p.push(t),l.cookie("cookieid",p,{expires:10,path:"/"}),g.push(l("#count").val())),l.cookie("cookienum",g,{expires:10,path:"/"}),l("#mask").css({visibility:"visible"}),l("#addcarBox").css({visibility:"visible"})}),l(".close").on("click",function(){l("#mask").css({visibility:"hidden"}),l("#addcarBox").css({visibility:"hidden"})})}(jQuery);