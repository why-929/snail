"use strict";!function(n){var o,r;function a(){var o=0,t=0;n(".carProducts:visible").each(function(i,c){n(".type input").prop("checked")&&(o+=parseInt(n(c).find(".col4 input").val()),t+=parseFloat(n(c).find(".col5 .oneprices").html()))}),n(".select").find(".selectNum").html(o),n(".totalPrice").html(t.toFixed(2))}n.cookie("cookieid")&&n.cookie("cookienum")&&(o=n.cookie("cookieid").split(","),r=n.cookie("cookienum").split(","),n.each(o,function(i,c){var t,e;t=o[i],e=r[i],n.ajax({url:"http://10.31.162.31/snail/php/data.php",dataType:"json"}).done(function(i){n.each(i,function(i,c){var o;t==c.id&&((o=n(".carProducts:hidden").clone(!0,!0)).find(".pic").find("img").attr("src",c.url),o.find(".pic").find("img").attr("id",c.id),o.find(".info").html(c.title),o.find(".oneprice").html(c.price),o.find(".numberBox").find("input").val(e),o.css("display","block"),n(".carProduct").append(o),o.find(".oneprices").html((c.price*e).toFixed(2)),a())})})})),n(".type input").on("change",function(){n(".carProducts:visible").find(":checkbox").prop("checked",n(this).prop("checked")),a()});var i=n(".carProducts:visible").find(":checkbox");function c(i){return(parseFloat(i.parents(".carProducts").find(".col3 .oneprice").html())*parseInt(i.parents(".carProducts").find(".col4 input").val())).toFixed(2)}n(".carProducts").on("change",i,function(){n(".carProducts:visible").find(":checkbox").length===n(".carProducts:visible").find("input:checked").size()?n(".type input").prop("checked",!0):n(".type input").prop("checked",!1),a()}),n(".add").on("click",function(){var i=n(this).parents(".carProducts").find(".col4 input").val();i++,n(this).parents(".carProducts").find(".col4 input").val(i),n(this).parents(".carProducts").find(".col5 .oneprices").html(c(n(this))),a(),d(n(this))}),n(".minus").on("click",function(){var i=n(this).parents(".carProducts").find(".col4 input").val();--i<1&&(i=1),n(this).parents(".carProducts").find(".col4 input").val(i),n(this).parents(".carProducts").find(".col5 .oneprices").html(c(n(this))),a(),d(n(this))}),n(".col4 .numberBox input").on("input",function(){var i=n(this).val();/^\d+$/g.test(i)||n(this).val(1),n(this).parents(".carProducts").find(".col5 .oneprices").html(c(n(this))),a(),d(n(this))});var t=[],e=[];function s(){e=n.cookie("cookieid")&&n.cookie("cookienum")?(t=n.cookie("cookieid").split(","),n.cookie("cookienum").split(",")):(t=[],[])}function d(i){s();var c=i.parents(".carProducts").find("img").attr("id");e[n.inArray(c,t)]=i.parents(".carProducts").find(".col4 input").val(),n.cookie("cookienum",e,{expires:10,path:"/"})}function l(o,i){var t=-1;n.each(i,function(i,c){o===c&&(t=i)}),i.splice(t,1),e.splice(t,1),n.cookie("cookieid",i,{expires:10,path:"/"}),n.cookie("cookienum",e,{expires:10,path:"/"})}n(".col6 .delete").on("click",function(){s(),window.confirm("你确定要删除吗?")&&(n(this).parents(".carProducts").remove(),l(n(this).parents(".carProducts").find("img").attr("id"),t),a())}),n(".carBox-footer-left .deleteMore").on("click",function(){s(),window.confirm("你确定要全部删除吗?")&&(n(".carProducts:visible").each(function(){n(this).find(":checkbox").is(":checked")&&(n(this).remove(),l(n(this).find("img").attr("id"),t))}),a())})}(jQuery),function(i){i(".sideBar-top").on("click",function(){i("html,body").animate({scrollTop:0},800)});var c,o=i(".one"),t=i(".two");localStorage.getItem("username")&&(c=localStorage.getItem("username"),o.html(c),t.html("注销")),t.on("click",function(){t.html("注销")&&(window.location.reload(),localStorage.removeItem("username"))})}(jQuery);